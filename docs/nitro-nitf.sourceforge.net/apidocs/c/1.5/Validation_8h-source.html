<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NITF: Validation.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">nitf</a></div>
<h1>Validation.h</h1><a href="Validation_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/* =========================================================================</span>
00002 <span class="comment"> * This file is part of NITRO</span>
00003 <span class="comment"> * =========================================================================</span>
00004 <span class="comment"> * </span>
00005 <span class="comment"> * (C) Copyright 2004 - 2008, General Dynamics - Advanced Information Systems</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * NITRO is free software; you can redistribute it and/or modify</span>
00008 <span class="comment"> * it under the terms of the GNU Lesser General Public License as published by</span>
00009 <span class="comment"> * the Free Software Foundation; either version 3 of the License, or</span>
00010 <span class="comment"> * (at your option) any later version.</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00013 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00014 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00015 <span class="comment"> * GNU Lesser General Public License for more details.</span>
00016 <span class="comment"> *</span>
00017 <span class="comment"> * You should have received a copy of the GNU Lesser General Public </span>
00018 <span class="comment"> * License along with this program; if not, If not, </span>
00019 <span class="comment"> * see &lt;http://www.gnu.org/licenses/&gt;.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> */</span>
00022 
00023 <span class="preprocessor">#ifndef __NITF_VALIDATION_H__</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#define __NITF_VALIDATION_H__</span>
00025 <span class="preprocessor"></span>
00026 <span class="preprocessor">#include "<a class="code" href="System_8h.html">nitf/System.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="Error_8h.html">nitf/Error.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="List_8h.html">nitf/List.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="Field_8h.html">nitf/Field.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="FieldWarning_8h.html">nitf/FieldWarning.h</a>"</span>
00031 
00032 <a class="code" href="Defines_8h.html#a11">NITF_CXX_GUARD</a>
00033 <span class="comment">/* Next are some Regular expressions that relate to the NITF specification */</span>
<a name="l00034"></a><a class="code" href="Validation_8h.html#a0">00034</a> <span class="preprocessor">#define NITF_VAL_BCS "([\\x20-\\x7E]|\\x0A|\\x0C|\\x0D)"</span>
<a name="l00035"></a><a class="code" href="Validation_8h.html#a1">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_A "([\\x20-\\x7E])"</span>
<a name="l00036"></a><a class="code" href="Validation_8h.html#a2">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_N "([\\x30-\\x39]|\\x2B|\\x2D)"</span>
<a name="l00037"></a><a class="code" href="Validation_8h.html#a3">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_N_POS_INT "([\\x30-\\x39])"</span>
<a name="l00038"></a><a class="code" href="Validation_8h.html#a4">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_SPACE "[\\x20]"</span>
<a name="l00039"></a><a class="code" href="Validation_8h.html#a5">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_ECS "([\\x20-\\x7E]|[\\xA0-\\xFF]|\\x0A|\\x0C|\\x0D)"</span>
00040 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="Validation_8h.html#a6">00041</a> <span class="preprocessor">#define NITF_VAL_SIGNED_DECIMAL "[+-]?[\\x30-\\x39]+(\\x2E[\\x30-\\x39]+)?"</span>
<a name="l00042"></a><a class="code" href="Validation_8h.html#a7">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_POS_DECIMAL "[\\x30-\\x39]+(\\x2E[\\x30-\\x39]+)?"</span>
00043 <span class="preprocessor"></span>
00044 <span class="comment">/* The NITF 2.0 Date format */</span>
<a name="l00045"></a><a class="code" href="Validation_8h.html#a8">00045</a> <span class="preprocessor">#define NITF_VAL_20_DATE "((0[1-9])|([1-2][0-9])|(3[0-1]))(([0-1][0-9])|(2[0-3]))([0-5][0-9]){2}Z(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\\d{2}"</span>
00046 <span class="preprocessor"></span>
00047 <span class="comment">/* The NITF 2.1 Date format */</span>
<a name="l00048"></a><a class="code" href="Validation_8h.html#a9">00048</a> <span class="preprocessor">#define NITF_VAL_21_DATE "(\\d{2}|[-][-]){2}((0[1-9])|(1[0-2])|[-][-])((0[1-9])|([1-2][0-9])|(3[0-1])|[-][-])(([0-1][0-9])|(2[0-3])|[-][-])([0-5][0-9]|[-][-]){2}"</span>
00049 <span class="preprocessor"></span>
00050 <span class="comment">/* The standard 7-char date format */</span>
<a name="l00051"></a><a class="code" href="Validation_8h.html#a10">00051</a> <span class="preprocessor">#define NITF_VAL_DATE_DDMMMYY "(([0-2]\\d)|(3[0-1])(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\\d{2})"</span>
00052 <span class="preprocessor"></span>
00053 <span class="comment">/* Regex strings for validating degrees-related fields */</span>
<a name="l00054"></a><a class="code" href="Validation_8h.html#a11">00054</a> <span class="preprocessor">#define NITF_VAL_DEGREES_DMS "([0-8][0-9]([0-5][0-9]){2}[NS]((0[0-9]{2})|(1[0-7][0-9]))([0-5][0-9]){2}[EW]){4}"</span>
<a name="l00055"></a><a class="code" href="Validation_8h.html#a12">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_DEGREES_LAT_LON "([+-][0-8][0-9][.][0-9]{3}[+-]((0[0-9]{2})|(1[0-7][0-9]))[.][0-9]{3}){4}"</span>
<a name="l00056"></a><a class="code" href="Validation_8h.html#a13">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_DEGREES_UTM_MGRS "([0-24-6]\\d[C-HJ-NP-X][A-HJ-N-P-Z][A-HJ-N-P-V]\\d{5}+\\d{5}){4}|(3[135789]X[A-HJ-N-P-Z][A-HJ-N-P-V]\\d{5}+\\d{5}){4}|(3\\d[C-HJ-NP-W][A-HJ-N-P-Z][A-HJ-N-P-V]\\d{5}+\\d{5}){4}"</span>
<a name="l00057"></a><a class="code" href="Validation_8h.html#a14">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_DEGREES_UTM "(\\d{15}){4}"</span>
00058 <span class="preprocessor"></span>
00059 <span class="comment">/* Regex string for the classification chars */</span>
<a name="l00060"></a><a class="code" href="Validation_8h.html#a15">00060</a> <span class="preprocessor">#define NITF_VAL_CLASSIFICATION "[TSCRU]"</span>
00061 <span class="preprocessor"></span>
00062 <span class="comment">/* macro for validating a varying number of BCS_A chars */</span>
<a name="l00063"></a><a class="code" href="Validation_8h.html#a16">00063</a> <span class="preprocessor">#define NITF_VALIDATE_BCS_A(NUM)    NITF_VAL_BCS_A"{"#NUM"}"</span>
<a name="l00064"></a><a class="code" href="Validation_8h.html#a17">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VALIDATE_BCS_N(NUM)    NITF_VAL_BCS_N"{"#NUM"}"</span>
<a name="l00065"></a><a class="code" href="Validation_8h.html#a18">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_A_PLUS         NITF_VAL_BCS_A"+"</span>
<a name="l00066"></a><a class="code" href="Validation_8h.html#a19">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define NITF_VAL_BCS_N_PLUS         NITF_VAL_BCS_N"+"</span>
00067 <span class="preprocessor"></span>
00068 
00069 <span class="comment">/* define some Validation regexes */</span>
00070 <span class="comment">/* Regex for ILOC in image subheader */</span>
<a name="l00071"></a><a class="code" href="Validation_8h.html#a20">00071</a> <span class="preprocessor">#define NITF_VAL_ILOC "((\\d{5})|([-]\\d{4})){2}"</span>
00072 <span class="preprocessor"></span>
00073 <span class="comment">/* Regex for IMAG in image subheader */</span>
<a name="l00074"></a><a class="code" href="Validation_8h.html#a21">00074</a> <span class="preprocessor">#define NITF_VAL_IMAG "(/([1-9][0-9]{2})|(0[1-9][0-9])|(0[0-9][1-9]))|("NITF_VAL_POS_DECIMAL"[ ]*)"</span>
00075 <span class="preprocessor"></span>
00076 <span class="comment">/* ONLY include the functions if we have validation on! */</span>
00077 <span class="preprocessor">#if defined(NITF_VALIDATION)</span>
00078 <span class="preprocessor"></span>
00082 <span class="keyword">typedef</span> <span class="keyword">enum</span> _nitf_ValidationStatus
00083 {
00084     NITF_VAL_MATCH = 0,         <span class="comment">/* specifies the regex matches */</span>
00085     NITF_VAL_NOMATCH,           <span class="comment">/* specifies the regex does NOT match */</span>
00086     NITF_VAL_ERROR              <span class="comment">/* specifies an error occurred trying to match */</span>
00087 } nitf_ValidationStatus;
00088 
00089 
00090 
00107 <a class="code" href="Defines_8h.html#a5">NITFAPI</a>(<span class="keywordtype">int</span>) nitf_Validation_urange32(<a class="code" href="structnitf__Field.html">nitf_Field</a> * field,
00108                                       nitf_Uint32 min,
00109                                       nitf_Uint32 max,
00110                                       const <span class="keywordtype">char</span> *name,
00111                                       <a class="code" href="structnitf__List.html">nitf_List</a> * problems,
00112                                       <a class="code" href="structnitf__Error.html">nitf_Error</a> * error);
00113 
00130 NITFAPI(<span class="keywordtype">int</span>) nitf_Validation_range64(<a class="code" href="structnitf__Field.html">nitf_Field</a> * field,
00131                                      nitf_Int64 min,
00132                                      nitf_Int64 max,
00133                                      const <span class="keywordtype">char</span> *name,
00134                                      <a class="code" href="structnitf__List.html">nitf_List</a> * problems,
00135                                      <a class="code" href="structnitf__Error.html">nitf_Error</a> * error);
00136 
00137 
00154 NITFAPI(<span class="keywordtype">int</span>) nitf_Validation_pattern(<a class="code" href="structnitf__Field.html">nitf_Field</a> * field,
00155                                      const <span class="keywordtype">char</span> *pattern,
00156                                      const <span class="keywordtype">char</span> *name,
00157                                      const <span class="keywordtype">char</span> *message,
00158                                      <a class="code" href="structnitf__List.html">nitf_List</a> * problems,
00159                                      <a class="code" href="structnitf__Error.html">nitf_Error</a> * error);
00160 
00161 
00173 NITFAPI(<span class="keywordtype">int</span>) nitf_Validation_matches(<a class="code" href="structnitf__Field.html">nitf_Field</a> * field,
00174                                      const <span class="keywordtype">char</span> *pattern,
00175                                      <a class="code" href="structnitf__Error.html">nitf_Error</a> * error);
00176 
00177 
00178 
00190 NITFAPI(<span class="keywordtype">int</span>) nitf_Validation_matchString(const <span class="keywordtype">char</span> *buf,
00191         const <span class="keywordtype">char</span> *pattern,
00192         <a class="code" href="structnitf__Error.html">nitf_Error</a> * error);
00193 
00194 
00195 
00196 <span class="comment">/* ====================================== */</span>
00197 <span class="comment">/* =============== MACROS =============== */</span>
00198 <span class="comment">/* ====================================== */</span>
00199 
00200 <span class="comment">/* A macro that calls the pattern validation function</span>
00201 <span class="comment"> * \param FIELD the Field object</span>
00202 <span class="comment"> * \param PATTERN the regex</span>
00203 <span class="comment"> * \param NAME a name that gets used when a warning is created</span>
00204 <span class="comment"> * It assumes the following:</span>
00205 <span class="comment"> * - a NITF_BOOL variable named 'status' that contains the status so far</span>
00206 <span class="comment"> * - a pointer to an nitf_Error named 'error'</span>
00207 <span class="comment"> * - a pointer to a nitf_List named 'problems'</span>
00208 <span class="comment"> * - a local int variable named 'tempStatus'</span>
00209 <span class="comment"> * - there is a goto label named 'CATCH_ERROR that assumes an error occurs</span>
00210 <span class="comment"> */</span>
00211 #define NITF_VALIDATE_PATTERN(FIELD, PATTERN, NAME) \
00212     { \
00213         <span class="keywordflow">if</span> (nitf_Validation_pattern(FIELD, PATTERN, NAME, PATTERN, problems, error) ==  \
00214                 NITF_VAL_ERROR) <span class="keywordflow">goto</span> CATCH_ERROR; \
00215     }
00216 
00217 
00218 
00219 <span class="comment">/* A macro that calls the pattern validation function</span>
00220 <span class="comment"> * \param FIELD the Field object</span>
00221 <span class="comment"> * \param PATTERN the regex</span>
00222 <span class="comment"> * \param NAME a name that gets used when a warning is created</span>
00223 <span class="comment"> * \param WARN a warning message that is used if a warning is issued</span>
00224 <span class="comment"> * It assumes the following:</span>
00225 <span class="comment"> * - a NITF_BOOL variable named 'status' that contains the status so far</span>
00226 <span class="comment"> * - a pointer to an nitf_Error named 'error'</span>
00227 <span class="comment"> * - a pointer to a nitf_List named 'problems'</span>
00228 <span class="comment"> * - a local int variable named 'tempStatus'</span>
00229 <span class="comment"> * - there is a goto label named 'CATCH_ERROR that assumes an error occurs</span>
00230 <span class="comment"> */</span>
00231 <span class="preprocessor">#define NITF_VALIDATE_PATTERN_MSG(FIELD, PATTERN, NAME, WARN) \</span>
00232 <span class="preprocessor">    { \</span>
00233 <span class="preprocessor">        if (nitf_Validation_pattern(FIELD, PATTERN, NAME, WARN, problems, error) ==  \</span>
00234 <span class="preprocessor">                NITF_VAL_ERROR) goto CATCH_ERROR; \</span>
00235 <span class="preprocessor">    }</span>
00236 <span class="preprocessor"></span>
00237 
00238 <span class="comment">/* A macro that calls the pattern validation function</span>
00239 <span class="comment"> * \param FIELD the Field object</span>
00240 <span class="comment"> * \param MIN the minimum value</span>
00241 <span class="comment"> * \param MAX the maximum value</span>
00242 <span class="comment"> * \param NAME a name that gets used when a warning is created</span>
00243 <span class="comment"> * It assumes the following:</span>
00244 <span class="comment"> * - a NITF_BOOL variable named 'status' that contains the status so far</span>
00245 <span class="comment"> * - a pointer to an nitf_Error named 'error'</span>
00246 <span class="comment"> * - a pointer to a nitf_List named 'problems'</span>
00247 <span class="comment"> * - a local int variable named 'tempStatus'</span>
00248 <span class="comment"> * - there is a goto label named 'CATCH_ERROR that assumes an error occurs</span>
00249 <span class="comment"> */</span>
00250 <span class="preprocessor">#define NITF_VALIDATE_URANGE32(FIELD, MIN, MAX, NAME) \</span>
00251 <span class="preprocessor">    { \</span>
00252 <span class="preprocessor">        if (nitf_Validation_urange32(FIELD, MIN, MAX, NAME, problems, error) == \</span>
00253 <span class="preprocessor">                NITF_VAL_ERROR) goto CATCH_ERROR; \</span>
00254 <span class="preprocessor">    }</span>
00255 <span class="preprocessor"></span>
00256 
00257 <span class="comment">/* A macro that calls the pattern validation function</span>
00258 <span class="comment"> * \param FIELD the Field object</span>
00259 <span class="comment"> * \param MIN the minimum value</span>
00260 <span class="comment"> * \param MAX the maximum value</span>
00261 <span class="comment"> * \param NAME a name that gets used when a warning is created</span>
00262 <span class="comment"> * It assumes the following:</span>
00263 <span class="comment"> * - a NITF_BOOL variable named 'status' that contains the status so far</span>
00264 <span class="comment"> * - a pointer to an nitf_Error named 'error'</span>
00265 <span class="comment"> * - a pointer to a nitf_List named 'problems'</span>
00266 <span class="comment"> * - a local int variable named 'tempStatus'</span>
00267 <span class="comment"> * - there is a goto label named 'CATCH_ERROR that assumes an error occurs</span>
00268 <span class="comment"> */</span>
00269 <span class="preprocessor">#define NITF_VALIDATE_RANGE64(FIELD, MIN, MAX, NAME) \</span>
00270 <span class="preprocessor">    { \</span>
00271 <span class="preprocessor">        if (nitf_Validation_range64(FIELD, MIN, MAX, NAME, problems, error) == \</span>
00272 <span class="preprocessor">                NITF_VAL_ERROR) goto CATCH_ERROR; \</span>
00273 <span class="preprocessor">    }</span>
00274 <span class="preprocessor"></span>
00275 
00276 <span class="comment">/* A macro that creates a warning and adds it to the warning list</span>
00277 <span class="comment"> * \param NAME the name of the field</span>
00278 <span class="comment"> * \param FIELD the Field object</span>
00279 <span class="comment"> * \param MESSAGE the message, or expectation</span>
00280 <span class="comment"> * It assumes the following:</span>
00281 <span class="comment"> * - a pointer to an nitf_Error named 'error'</span>
00282 <span class="comment"> * - a pointer to a nitf_List named 'problems'</span>
00283 <span class="comment"> * - a local pointer to a nitf_FieldWarning named 'warning'</span>
00284 <span class="comment"> * - there is a goto label named 'CATCH_ERROR that assumes an error occurs</span>
00285 <span class="comment"> */</span>
00286 <span class="preprocessor">#define NITF_VALIDATE_WARN(NAME, FIELD, MESSAGE) \</span>
00287 <span class="preprocessor">    { \</span>
00288 <span class="preprocessor">        nitf_FieldWarning* warning = nitf_FieldWarning_construct(0, NAME, FIELD, MESSAGE, error); \</span>
00289 <span class="preprocessor">        if (!warning || !nitf_List_pushBack(problems, warning, error)) goto CATCH_ERROR; \</span>
00290 <span class="preprocessor">    }</span>
00291 <span class="preprocessor"></span>
00292 <span class="preprocessor">#endif</span>
00293 <span class="preprocessor"></span>
00294 <a class="code" href="Defines_8h.html#a12">NITF_CXX_ENDGUARD</a>
00295 
00296 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Mar 1 13:51:10 2008 for NITF by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
